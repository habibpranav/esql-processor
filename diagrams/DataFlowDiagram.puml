@startuml

skinparam rectangleStyle rounded

rectangle "Esql Query File\n(EsqlQuery1, EsqlQuery2...)" as Esql
rectangle "EMFParser\n(parse sections, conditions, aggregates)" as Parser
rectangle "EMFQuery Object\n(Parsed Structure)" as Query
rectangle "DatabaseFetcher\n(load SALES table)" as DB
rectangle "EMFEngine\n(Algorithm Execution)" as Engine
rectangle "Result Rows\n(after HAVING)" as Result
rectangle "Formatter/Printer\n(optional)" as Printer
rectangle "Console / Output File" as Output

Esql --> Parser : read & parse
Parser --> Query : build EMFQuery

Query --> Engine : provide structure
DB --> Engine : provide rows

Engine --> Result : final rows
Result --> Printer : format output
Printer --> Output : display

@enduml